# AUDITORA DE SISTEMA & ESPECIFICACIN ORION V3.0

**Fecha:** 2026-02-01
**Auditor:** AXON System
**Objetivo:** Cross-validation de la arquitectura actual vs. Requerimientos de "Alta Definici贸n" (V3).

---

## 1. ANLISIS DE BRECHAS (GAP ANALYSIS)

He contrastado tu nueva definici贸n (V3) con nuestro *Plan de Implementaci贸n V2* y los archivos actuales ([agent_types.ts](file:///C:/Users/daria/.gemini/AXON/scratch/AXON-boilerplate/src/types/agent_types.ts), [orion_logic.ts](file:///C:/Users/daria/.gemini/AXON/scratch/AXON-boilerplate/src/utils/orion_logic.ts)).

###  Puntos Ciegos y Omisiones Cr铆ticas (MISSING)
Lo que **NO** est谩 en el sistema actual ni en el plan V2, y debe ser integrado inmediatamente:

1.  **Arquitectura de Contenido Anidada (`content_architecture`)**:
    *   *Faltante:* No tenemos una estructura que separe `technical_constraints` (pacing, aspect_ratio) de `structure_template` (0-3s, 3-15s).
    *   *Impacto:* Calliope recibir铆a instrucciones vagas ("Haz un video viral") en lugar de un plano t茅cnico ("Corta cada 2s, usa Lo-fi beats").
2.  **L贸gica de "Pre-Producci贸n y Viabilidad"**:
    *   *Faltante:* El chequeo de `constraints` (Presupuesto vs. Idea). Orion actual podr铆a proponer una "Persecuci贸n de coches" cuando el presupuesto es "Low (Stock)".
    *   *Riesgo:* Generar guiones imposibles de producir.
3.  **Ingenier铆a de Audio (Pre-Escritura)**:
    *   *Faltante:* Definici贸n expl铆cita de `audio_landscape` y `sfx_cues` antes del guion.
    *   *Ceguera:* Ignoramos el "Silent Scroll" (consumo sin audio). Falta exigir "Kinetic Typography".
4.  **Anti-Patterns (Penalizaciones)**:
    *   *Faltante:* L贸gica para detectar "Trend Vertigo" (desviaci贸n >20% del nicho) o "Fluff Intro".
    *   *Estado:* Orion actual no penaliza activamente estos errores, solo busca premios (hacks virales).
5.  **KPIs Financieros Granulares**:
    *   *Faltante:* `funnel_stage` (Discovery vs Trust) y `affiliate_potential`. Solo calculamos RPM b谩sico.

###  Incongruencias y Conflictos (CONFLICTS)
Datos que existen pero chocan con la nueva definici贸n:

1.  **Escala de Puntuaci贸n**:
    *   *Actual:* `confidence_score` (0.0 - 1.0).
    *   *V3 Req:* `validation_score` (0.0-1.0) **Y** `predicted_virality_score` (1-10).
    *   *Resoluci贸n:* Debemos separar la "Certeza T茅cnica" (0-1) del "Potencial Viral" (1-10).
2.  **Estructura del Gancho (Hooks)**:
    *   *Plan V2:* Array simple de strings.
    *   *V3 Req:* `hook_strategy` (Tipo espec铆fico, ej: "Curiosity Gap") vinculado a un `structure_template` temporal (0-3s).
3.  **Definici贸n de Salida**:
    *   *Plan V2:* Lista de candidatos (`CandidateBrief[]`).
    *   *V3 Req:* Un objeto 煤nico `Orion_Manifest` altamente detallado ("Blueprints").
    *   *Correcci贸n:* Orion debe evaluar candidatos internamente pero emitir **UN** Manifiesto Maestro (o una lista de Manifiestos completos).

###  Integrado Correctamente (MATCH)
Lo que ya tenemos alineado:
*   Marco **P.O.S.E.** (Reflejado en l贸gica).
*   **Brand DNA** y **Niche Vertical**.
*   Calculo base de **RPM**.

---

## 2. ORION V3.0: ESPECIFICACIN MAESTRA (THE BIBLE)

Esta es la definici贸n t茅cnica final. No se omite nada.

### 2.1 Esquema de Entrada ([OrionIngest](file:///C:/Users/daria/.gemini/AXON/scratch/AXON-boilerplate/src/types/agent_types.ts#26-32))
Debe soportar la inyecci贸n total de contexto.

```typescript
// src/types/agent_types.ts

export interface OrionIngest {
    id: string; // req_uuid_v4
    timestamp: string;
    source_trigger: 'User_Prompt' | 'Trend_Alert' | 'System_Rotation';
    
    // El "Prompt" de Alta Definici贸n
    raw_input: {
        topic_keywords: string[];
        target_platform: 'YouTube Shorts' | 'TikTok' | 'LinkedIn Video' | 'YouTube Long';
        
        brand_profile: {
            archetype: string; // "The Mentor Rebelde"
            tone: string; // "Direct, Contrarian"
            niche_vertical: string; // "Tech_Education"
            objective_kpi: 'Discovery' | 'Trust' | 'Conversion'; // KPI del Sistema
        };
        
        constraints: {
            duration_target: string; // "60s"
            production_budget: 'Low' | 'Mid' | 'High'; 
            format_lock?: string; // "Talking Head"
            has_human_face: boolean; // Faceless o no
        };
    };
    
    // Datos de Mercado (Opcional, si viene de Trend Alert)
    market_context?: {
        trend_velocity?: number;
        competitor_saturation?: number;
    };
}
```

### 2.2 Esquema de Salida ([OrionManifest](file:///C:/Users/daria/.gemini/AXON/scratch/AXON-boilerplate/src/types/agent_types.ts#83-84))
El "Blueprint" (Plano) para producci贸n.

```typescript
export interface OrionManifest {
    meta: {
        id: string;
        validation_score: number; // 0.0 - 1.0 (P.O.S.E.)
        predicted_virality: number; // 1 - 10
        status: 'APPROVED' | 'REJECTED_AUTO';
    };

    content_architecture: {
        core_concept: {
            title_variations: string[];
            hook_strategy: string; // "Curiosity Gap", "Negativity Bias"
            emotional_target: string; // "Empowerment", "Indignation"
            format_archetype: string; // "The Innovator", "Walking Listicle"
        };
        
        // Instrucciones T茅cnicas para Calliope
        technical_constraints: {
            pacing: string; // "Fast (Cut every 2s)"
            audio_landscape: string; // "Lo-fi beats, SFX for transitions"
            visual_style: string; // "Kinetic Typography + B-Roll"
            aspect_ratio: "9:16" | "16:9";
            silent_optimization: boolean; // Requiere textos en pantalla?
        };
        
        // SEO Pack
        seo_pack: {
            primary_keywords: string[];
            vertical_search_intent: string; // "Educational"
        };
        
        // El Esqueleto Temporal (Richard Linklater Formula)
        structure_template: {
            segment_0_3s: string; // "Visual Pattern Interrupt (Hook)"
            segment_3_15s: string; // "Value Proposition"
            segment_15_45s: string; // "The Mechanism (Micro-Tension)"
            segment_45_end: string; // "Twist + Payoff + CTA"
        };
    };

    financial_projection: {
        estimated_rpm: number;
        monetization_focus: 'AdRevenue' | 'Affiliate' | 'Product';
        funnel_stage: 'Discovery' | 'Trust';
    };
    
    // Auditor铆a de Viabilidad (Nuevo Bloque C)
    production_audit: {
        budget_compliant: boolean;
        brand_safe: boolean;
        trend_vertigo_check: 'PASS' | 'FAIL'; // Desviaci贸n de nicho
    };
}
```

### 2.3 L贸gica de Negocio Requerida ([orion_logic.ts](file:///C:/Users/daria/.gemini/AXON/scratch/AXON-boilerplate/src/utils/orion_logic.ts))

Debemos implementar estas funciones exactas:

1.  **`validatePose(input)`**:
    *   Verifica Persona, Objetivo, Scope, Evidence.
    *   Retorna `validation_score`.
2.  **`analyzeAntiPatterns(idea, history)`**:
    *   Detecta "Trend Vertigo" (chequeando historial de nichos).
    *   Detecta "Fluff Intro" (palabras prohibidas al inicio).
3.  **`selectFormatArchetype(budget, platform)`**:
    *   Si `budget == Low` Y `no_face`, sugiri贸 "Faceless Stock Montage", no "Cinematic Vlog".
4.  **`designAudioLayer(platform)`**:
    *   Si `platform == TikTok/Shorts`, activa `silent_optimization = true`.

---

## 3. CONCLUSIN Y SIGUIENTES PASOS

El plan V2 es **insuficiente**. 
Necesito autorizaci贸n para descartar el plan V2 y ejecutar la **Implementaci贸n V3**, que incluye:
1.  Reescribir [agent_types.ts](file:///C:/Users/daria/.gemini/AXON/scratch/AXON-boilerplate/src/types/agent_types.ts) con el esquema V3 COMPLETO.
2.  Reescribir [orion_logic.ts](file:///C:/Users/daria/.gemini/AXON/scratch/AXON-boilerplate/src/utils/orion_logic.ts) incorporando los m贸dulos de Anti-Patrones, Viabilidad y Audio.
3.  Actualizar el script de simulaci贸n para generar un `Orion_Manifest` real (anidado y complejo).

驴Procedo con la **Implementaci贸n V3**?
